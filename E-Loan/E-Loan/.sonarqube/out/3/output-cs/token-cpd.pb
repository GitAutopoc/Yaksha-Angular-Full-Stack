¬Ï
ZC:\Users\selvaak\source\repos\.NET-NewYaksha-UseCase\E-Loan\Controllers\AdminController.cs
	namespace 	
E_Loan
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
AdminController  
:! "
ControllerBase# 1
{ 
private 
readonly 
UserManager $
<$ %

UserMaster% /
>/ 0
userManager1 <
;< =
private 
readonly 
RoleManager $
<$ %
IdentityRole% 1
>1 2
roleManager3 >
;> ?
private 
readonly 
IConfiguration '
_configuration( 6
;6 7
private 
readonly 
ILoanAdminServices +
_adminServices, :
;: ;
public 
AdminController 
( 
UserManager *
<* +

UserMaster+ 5
>5 6
userManager7 B
,B C
RoleManagerD O
<O P
IdentityRoleP \
>\ ]
roleManager^ i
,i j
IConfigurationk y
configuration	z á
,
á à 
ILoanAdminServices
â õ
loanAdminServices
ú ≠
)
≠ Æ
{   	
this!! 
.!! 
userManager!! 
=!! 
userManager!! *
;!!* +
this"" 
."" 
roleManager"" 
="" 
roleManager"" *
;""* +
_configuration## 
=## 
configuration## *
;##* +
_adminServices$$ 
=$$ 
loanAdminServices$$ .
;$$. /
}%% 	
[++ 	
HttpPost++	 
]++ 
[,, 	
Route,,	 
(,, 
$str,, 
),, 
],, 
[-- 	
AllowAnonymous--	 
]-- 
public.. 
async.. 
Task.. 
<.. 
IActionResult.. '
>..' (
Login..) .
(... /
[../ 0
FromBody..0 8
]..8 9
LoginViewModel..: H
model..I N
)..N O
{// 	
var00 
user00 
=00 
await00 
userManager00 (
.00( )
FindByEmailAsync00) 9
(009 :
model00: ?
.00? @
Email00@ E
)00E F
;00F G
if33 
(33 
user33 
.33 
Enabled33 
==33 
true33  $
)33$ %
return44 

StatusCode44 !
(44! "
StatusCodes44" -
.44- .(
Status500InternalServerError44. J
,44J K
new44L O
Response44P X
{44Y Z
Status44[ a
=44b c
$str44d k
,44k l
Message44m t
=44u v
$str	44w ¢
}
44£ §
)
44§ •
;
44• ¶
if66 
(66 
user66 
!=66 
null66 
&&66 
await66  %
userManager66& 1
.661 2
CheckPasswordAsync662 D
(66D E
user66E I
,66I J
model66K P
.66P Q
Password66Q Y
)66Y Z
)66Z [
{77 
var88 
	userRoles88 
=88 
await88  %
userManager88& 1
.881 2
GetRolesAsync882 ?
(88? @
user88@ D
)88D E
;88E F
var:: 

authClaims:: 
=::  
new::! $
List::% )
<::) *
Claim::* /
>::/ 0
{;; 
new<< 
Claim<< 
(<< 

ClaimTypes<< (
.<<( )
Name<<) -
,<<- .
user<</ 3
.<<3 4
UserName<<4 <
)<<< =
,<<= >
new== 
Claim== 
(== #
JwtRegisteredClaimNames== 5
.==5 6
Jti==6 9
,==9 :
Guid==; ?
.==? @
NewGuid==@ G
(==G H
)==H I
.==I J
ToString==J R
(==R S
)==S T
)==T U
,==U V
}>> 
;>> 
foreach@@ 
(@@ 
var@@ 
userRole@@ %
in@@& (
	userRoles@@) 2
)@@2 3
{AA 

authClaimsBB 
.BB 
AddBB "
(BB" #
newBB# &
ClaimBB' ,
(BB, -

ClaimTypesBB- 7
.BB7 8
RoleBB8 <
,BB< =
userRoleBB> F
)BBF G
)BBG H
;BBH I
}CC 
varEE 
authSigningKeyEE "
=EE# $
newEE% ( 
SymmetricSecurityKeyEE) =
(EE= >
EncodingEE> F
.EEF G
UTF8EEG K
.EEK L
GetBytesEEL T
(EET U
_configurationEEU c
[EEc d
$strEEd p
]EEp q
)EEq r
)EEr s
;EEs t
varGG 
tokenGG 
=GG 
newGG 
JwtSecurityTokenGG  0
(GG0 1
issuerHH 
:HH 
_configurationHH *
[HH* +
$strHH+ <
]HH< =
,HH= >
audienceII 
:II 
_configurationII ,
[II, -
$strII- @
]II@ A
,IIA B
expiresJJ 
:JJ 
DateTimeJJ %
.JJ% &
NowJJ& )
.JJ) *
AddHoursJJ* 2
(JJ2 3
$numJJ3 4
)JJ4 5
,JJ5 6
claimsKK 
:KK 

authClaimsKK &
,KK& '
signingCredentialsLL &
:LL& '
newLL( +
SigningCredentialsLL, >
(LL> ?
authSigningKeyLL? M
,LLM N
SecurityAlgorithmsLLO a
.LLa b

HmacSha256LLb l
)LLl m
)MM 
;MM 
returnOO 
OkOO 
(OO 
newOO 
{PP 
tokenQQ 
=QQ 
newQQ #
JwtSecurityTokenHandlerQQ  7
(QQ7 8
)QQ8 9
.QQ9 :

WriteTokenQQ: D
(QQD E
tokenQQE J
)QQJ K
,QQK L

expirationRR 
=RR  
tokenRR! &
.RR& '
ValidToRR' .
}SS 
)SS 
;SS 
}TT 
returnUU 
UnauthorizedUU 
(UU  
)UU  !
;UU! "
}VV 	
[]] 	
HttpPost]]	 
]]] 
[^^ 	
Route^^	 
(^^ 
$str^^ 
)^^ 
]^^ 
[__ 	
AllowAnonymous__	 
]__ 
publicaa 
asyncaa 
Taskaa 
<aa 
IActionResultaa '
>aa' (
Registeraa) 1
(aa1 2
[aa2 3
FromBodyaa3 ;
]aa; <#
UserMasterRegisterModelaa= T
modelaaU Z
)aaZ [
{bb 	
varcc 

userExistscc 
=cc 
awaitcc "
_adminServicescc# 1
.cc1 2
FindByEmailAsynccc2 B
(ccB C
modelccC H
.ccH I
EmailccI N
)ccN O
;ccO P
ifdd 
(dd 

userExistsdd 
!=dd 
nulldd "
)dd" #
returnee 

StatusCodeee !
(ee! "
StatusCodesee" -
.ee- .(
Status500InternalServerErroree. J
,eeJ K
neweeL O
ResponseeeP X
{eeY Z
Statusee[ a
=eeb c
$streed k
,eek l
Messageeem t
=eeu v
$str	eew ç
}
eeé è
)
eeè ê
;
eeê ë

UserMastergg 
usergg 
=gg 
newgg !

UserMastergg" ,
(gg, -
)gg- .
{hh 
Emailii 
=ii 
modelii 
.ii 
Emailii #
,ii# $
SecurityStampjj 
=jj 
Guidjj  $
.jj$ %
NewGuidjj% ,
(jj, -
)jj- .
.jj. /
ToStringjj/ 7
(jj7 8
)jj8 9
,jj9 :
UserNamekk 
=kk 
modelkk  
.kk  !
Namekk! %
,kk% &
Contactll 
=ll 
modelll 
.ll  
Contactll  '
,ll' (
Addressmm 
=mm 
modelmm 
.mm  
Addressmm  '
,mm' (
IdproofTypesnn 
=nn 
modelnn $
.nn$ %
IdproofTypesnn% 1
,nn1 2
IdProofNumberoo 
=oo 
modeloo  %
.oo% &
IdProofNumberoo& 3
,oo3 4
Enabledpp 
=pp 
modelpp 
.pp  
Enabledpp  '
}qq 
;qq 
varrr 
resultrr 
=rr 
awaitrr 
_adminServicesrr -
.rr- .
Registerrr. 6
(rr6 7
userrr7 ;
,rr; <
modelrr= B
.rrB C
PasswordrrC K
)rrK L
;rrL M
ifss 
(ss 
!ss 
resultss 
.ss 
	Succeededss !
)ss! "
returntt 

StatusCodett !
(tt! "
StatusCodestt" -
.tt- .(
Status500InternalServerErrortt. J
,ttJ K
newttL O
ResponsettP X
{ttY Z
Statustt[ a
=ttb c
$strttd k
,ttk l
Messagettm t
=ttu v
$str	ttw ∑
}
tt∏ π
)
ttπ ∫
;
tt∫ ª
returnvv 
Okvv 
(vv 
newvv 
Responsevv "
{vv# $
Statusvv% +
=vv, -
$strvv. 7
,vv7 8
Messagevv9 @
=vvA B
$strvvC _
}vv` a
)vva b
;vvb c
}ww 	
[}} 	
HttpPost}}	 
]}} 
[~~ 	
Route~~	 
(~~ 
$str~~ 
)~~ 
]~~ 
[ 	
	Authorize	 
( 
Roles 
= 
$str "
)" #
]# $
public
ÄÄ 
async
ÄÄ 
Task
ÄÄ 
<
ÄÄ 
IActionResult
ÄÄ '
>
ÄÄ' (

CreateRole
ÄÄ) 3
(
ÄÄ3 4
[
ÄÄ4 5
FromBody
ÄÄ5 =
]
ÄÄ= >!
CreateRoleViewModel
ÄÄ? R
model
ÄÄS X
)
ÄÄX Y
{
ÅÅ 	
if
ÇÇ 
(
ÇÇ 
!
ÇÇ 

ModelState
ÇÇ 
.
ÇÇ 
IsValid
ÇÇ #
)
ÇÇ# $
{
ÉÉ 
return
ÑÑ 

BadRequest
ÑÑ !
(
ÑÑ! "

ModelState
ÑÑ" ,
)
ÑÑ, -
;
ÑÑ- .
}
ÖÖ 
var
ÜÜ 

roleExists
ÜÜ 
=
ÜÜ 
await
ÜÜ "
roleManager
ÜÜ# .
.
ÜÜ. /
FindByNameAsync
ÜÜ/ >
(
ÜÜ> ?
model
ÜÜ? D
.
ÜÜD E
RoleName
ÜÜE M
)
ÜÜM N
;
ÜÜN O
if
àà 
(
àà 

roleExists
àà 
!=
àà 
null
àà "
)
àà" #
return
ââ 

StatusCode
ââ !
(
ââ! "
StatusCodes
ââ" -
.
ââ- .*
Status500InternalServerError
ââ. J
,
ââJ K
new
ââL O
Response
ââP X
{
ââY Z
Status
ââ[ a
=
ââb c
$str
ââd k
,
ââk l
Message
ââm t
=
ââu v
$strââw í
}ââì î
)ââî ï
;ââï ñ
var
ãã 
result
ãã 
=
ãã 
await
ãã 
_adminServices
ãã -
.
ãã- .

CreateRole
ãã. 8
(
ãã8 9
model
ãã9 >
)
ãã> ?
;
ãã? @
if
çç 
(
çç 
!
çç 
result
çç 
.
çç 
	Succeeded
çç !
)
çç! "
return
éé 

StatusCode
éé !
(
éé! "
StatusCodes
éé" -
.
éé- .*
Status500InternalServerError
éé. J
,
ééJ K
new
ééL O
Response
ééP X
{
ééY Z
Status
éé[ a
=
ééb c
$str
ééd k
,
éék l
Message
éém t
=
ééu v
$strééw º
}ééΩ æ
)ééæ ø
;ééø ¿
return
êê 
Ok
êê 
(
êê 
new
êê 
Response
êê "
{
êê# $
Status
êê% +
=
êê, -
$str
êê. 7
,
êê7 8
Message
êê9 @
=
êêA B
$str
êêC _
}
êê` a
)
êêa b
;
êêb c
}
ëë 	
[
òò 	
HttpPost
òò	 
]
òò 
[
ôô 	
Route
ôô	 
(
ôô 
$str
ôô (
)
ôô( )
]
ôô) *
[
öö 	
	Authorize
öö	 
(
öö 
Roles
öö 
=
öö 
$str
öö "
)
öö" #
]
öö# $
public
õõ 
async
õõ 
Task
õõ 
<
õõ 
IActionResult
õõ '
>
õõ' (
EditUsersInRole
õõ) 8
(
õõ8 9
[
õõ9 :
FromBody
õõ: B
]
õõB C
UserRoleViewModel
õõD U
model
õõV [
,
õõ[ \
string
õõ] c
roleId
õõd j
)
õõj k
{
úú 	
if
ùù 
(
ùù 
!
ùù 

ModelState
ùù 
.
ùù 
IsValid
ùù #
&&
ùù$ &
roleId
ùù' -
!=
ùù. 0
null
ùù1 5
)
ùù5 6
{
ûû 
return
üü 

BadRequest
üü !
(
üü! "

ModelState
üü" ,
)
üü, -
;
üü- .
}
†† 
var
°° 
role
°° 
=
°° 
await
°° 
_adminServices
°° +
.
°°+ ,
FindRoleByRoleId
°°, <
(
°°< =
roleId
°°= C
)
°°C D
;
°°D E
if
¢¢ 
(
¢¢ 
role
¢¢ 
==
¢¢ 
null
¢¢ 
)
¢¢ 
{
££ 
return
§§ 

StatusCode
§§ !
(
§§! "
StatusCodes
§§" -
.
§§- .*
Status500InternalServerError
§§. J
,
§§J K
new
§§L O
Response
§§P X
{
•• 
Status
•• 
=
•• 
$str
•• "
,
••" #
Message
••$ +
=
••, -
$"
••. 0
$str
••0 ?
{
••? @
roleId
••@ F
}
••F G
$str
••G W
"
••W X
}
••Y Z
)
••Z [
;
••[ \
}
¶¶ 
var
ßß 
result
ßß 
=
ßß 
await
ßß 
_adminServices
ßß -
.
ßß- .
EditUsersInRole
ßß. =
(
ßß= >
model
ßß> C
,
ßßC D
roleId
ßßE K
)
ßßK L
;
ßßL M
if
®® 
(
®® 
!
®® 
result
®® 
.
®® 
	Succeeded
®® !
)
®®! "
{
©© 
return
™™ 

StatusCode
™™ !
(
™™! "
StatusCodes
™™" -
.
™™- .*
Status500InternalServerError
™™. J
,
™™J K
new
™™L O
Response
™™P X
{
´´ 
Status
¨¨ 
=
¨¨ 
$str
¨¨ $
,
¨¨$ %
Message
≠≠ 
=
≠≠ 
$str
≠≠ ^
}
ÆÆ 
)
ÆÆ 
;
ÆÆ 
}
ØØ 
return
∞∞ 
Ok
∞∞ 
(
∞∞ 
new
∞∞ 
Response
∞∞ "
{
∞∞# $
Status
∞∞% +
=
∞∞, -
$str
∞∞. 7
,
∞∞7 8
Message
∞∞9 @
=
∞∞A B
$str
∞∞C e
}
∞∞f g
)
∞∞g h
;
∞∞h i
}
±± 	
[
∏∏ 	
HttpPost
∏∏	 
]
∏∏ 
[
ππ 	
Route
ππ	 
(
ππ 
$str
ππ  
)
ππ  !
]
ππ! "
[
∫∫ 	
	Authorize
∫∫	 
(
∫∫ 
Roles
∫∫ 
=
∫∫ 
$str
∫∫ %
)
∫∫% &
]
∫∫& '
public
ªª 
async
ªª 
Task
ªª 
<
ªª 
IActionResult
ªª '
>
ªª' ( 
ChangeUserPassword
ªª) ;
(
ªª; <
[
ªª< =
FromBody
ªª= E
]
ªªE F%
ChangePasswordViewModel
ªªG ^
model
ªª_ d
)
ªªd e
{
ºº 	
var
ΩΩ 
user
ΩΩ 
=
ΩΩ 
await
ΩΩ 
_adminServices
ΩΩ +
.
ΩΩ+ ,
FindByEmailAsync
ΩΩ, <
(
ΩΩ< =
model
ΩΩ= B
.
ΩΩB C
Email
ΩΩC H
)
ΩΩH I
;
ΩΩI J
if
ææ 
(
ææ 
user
ææ 
==
ææ 
null
ææ 
)
ææ 
{
øø 
return
¿¿ 

StatusCode
¿¿ !
(
¿¿! "
StatusCodes
¿¿" -
.
¿¿- .*
Status500InternalServerError
¿¿. J
,
¿¿J K
new
¿¿L O
Response
¿¿P X
{
¡¡ 
Status
¡¡ 
=
¡¡ 
$str
¡¡ "
,
¡¡" #
Message
¡¡$ +
=
¡¡, -
$"
¡¡. 0
$str
¡¡0 B
{
¡¡B C
model
¡¡C H
.
¡¡H I
Email
¡¡I N
}
¡¡N O
$str
¡¡O _
"
¡¡_ `
}
¡¡a b
)
¡¡b c
;
¡¡c d
}
¬¬ 
else
√√ 
{
ƒƒ 
var
≈≈ 
result
≈≈ 
=
≈≈ 
await
≈≈ "
_adminServices
≈≈# 1
.
≈≈1 2 
ChangeUserPassword
≈≈2 D
(
≈≈D E
model
≈≈E J
)
≈≈J K
;
≈≈K L
if
∆∆ 
(
∆∆ 
!
∆∆ 
result
∆∆ 
.
∆∆ 
	Succeeded
∆∆ %
)
∆∆% &
{
«« 
return
»» 

StatusCode
»» %
(
»»% &
StatusCodes
»»& 1
.
»»1 2*
Status500InternalServerError
»»2 N
,
»»N O
new
»»P S
Response
»»T \
{
…… 
Status
   
=
    
$str
  ! (
,
  ( )
Message
ÀÀ 
=
ÀÀ  !
$str
ÀÀ" `
}
ÃÃ 
)
ÃÃ 
;
ÃÃ 
}
ÕÕ 
foreach
ŒŒ 
(
ŒŒ 
var
ŒŒ 
error
ŒŒ "
in
ŒŒ# %
result
ŒŒ& ,
.
ŒŒ, -
Errors
ŒŒ- 3
)
ŒŒ3 4
{
œœ 

ModelState
–– 
.
–– 
AddModelError
–– ,
(
––, -
$str
––- /
,
––/ 0
error
––1 6
.
––6 7
Description
––7 B
)
––B C
;
––C D
}
—— 
}
““ 
return
”” 
Ok
”” 
(
”” 
new
”” 
Response
”” "
{
””# $
Status
””% +
=
””, -
$str
””. 7
,
””7 8
Message
””9 @
=
””A B
$str
””C `
}
””a b
)
””b c
;
””c d
}
‘‘ 	
[
⁄⁄ 	
HttpPost
⁄⁄	 
]
⁄⁄ 
[
€€ 	
Route
€€	 
(
€€ 
$str
€€ 
)
€€ 
]
€€ 
[
‹‹ 	
	Authorize
‹‹	 
(
‹‹ 
Roles
‹‹ 
=
‹‹ 
$str
‹‹ "
)
‹‹" #
]
‹‹# $
public
›› 
async
›› 
Task
›› 
<
›› 
IActionResult
›› '
>
››' (
EditRole
››) 1
(
››1 2
[
››2 3
FromBody
››3 ;
]
››; <
EditRoleViewModel
››= N
model
››O T
)
››T U
{
ﬁﬁ 	
var
ﬂﬂ 
role
ﬂﬂ 
=
ﬂﬂ 
await
ﬂﬂ 
_adminServices
ﬂﬂ +
.
ﬂﬂ+ ,
FindRoleByRoleId
ﬂﬂ, <
(
ﬂﬂ< =
model
ﬂﬂ= B
.
ﬂﬂB C
Id
ﬂﬂC E
)
ﬂﬂE F
;
ﬂﬂF G
if
‡‡ 
(
‡‡ 
role
‡‡ 
==
‡‡ 
null
‡‡ 
)
‡‡ 
{
·· 
return
‚‚ 

StatusCode
‚‚ !
(
‚‚! "
StatusCodes
‚‚" -
.
‚‚- .*
Status500InternalServerError
‚‚. J
,
‚‚J K
new
‚‚L O
Response
‚‚P X
{
„„ 
Status
„„ 
=
„„ 
$str
„„ "
,
„„" #
Message
„„$ +
=
„„, -
$"
„„. 0
$str
„„0 ?
{
„„? @
model
„„@ E
.
„„E F
Id
„„F H
}
„„H I
$str
„„I Y
"
„„Y Z
}
„„[ \
)
„„\ ]
;
„„] ^
}
‰‰ 
else
ÂÂ 
{
ÊÊ 
var
ÁÁ 
result
ÁÁ 
=
ÁÁ 
await
ÁÁ "
_adminServices
ÁÁ# 1
.
ÁÁ1 2
EditRole
ÁÁ2 :
(
ÁÁ: ;
model
ÁÁ; @
)
ÁÁ@ A
;
ÁÁA B
if
ËË 
(
ËË 
result
ËË 
.
ËË 
	Succeeded
ËË $
)
ËË$ %
{
ÈÈ 
return
ÍÍ 
RedirectToAction
ÍÍ +
(
ÍÍ+ ,
$str
ÍÍ, 6
,
ÍÍ6 7
$str
ÍÍ8 ?
)
ÍÍ? @
;
ÍÍ@ A
}
ÎÎ 
foreach
ÏÏ 
(
ÏÏ 
var
ÏÏ 
error
ÏÏ "
in
ÏÏ# %
result
ÏÏ& ,
.
ÏÏ, -
Errors
ÏÏ- 3
)
ÏÏ3 4
{
ÌÌ 

ModelState
ÓÓ 
.
ÓÓ 
AddModelError
ÓÓ ,
(
ÓÓ, -
$str
ÓÓ- /
,
ÓÓ/ 0
error
ÓÓ1 6
.
ÓÓ6 7
Description
ÓÓ7 B
)
ÓÓB C
;
ÓÓC D
}
ÔÔ 
return
 
Ok
 
(
 
new
 
Response
 &
{
' (
Status
) /
=
0 1
$str
2 ;
,
; <
Message
= D
=
E F
$str
G g
}
h i
)
i j
;
j k
}
ÒÒ 
}
ÚÚ 	
[
˜˜ 	
HttpGet
˜˜	 
]
˜˜ 
[
¯¯ 	
Route
¯¯	 
(
¯¯ 
$str
¯¯ 
)
¯¯ 
]
¯¯ 
[
˘˘ 	
	Authorize
˘˘	 
(
˘˘ 
Roles
˘˘ 
=
˘˘ 
$str
˘˘ "
)
˘˘" #
]
˘˘# $
public
˙˙ 
async
˙˙ 
Task
˙˙ 
<
˙˙ 
IEnumerable
˙˙ %
<
˙˙% &
IdentityRole
˙˙& 2
>
˙˙2 3
>
˙˙3 4
ListRole
˙˙5 =
(
˙˙= >
)
˙˙> ?
{
˚˚ 	
var
¸¸ 
roles
¸¸ 
=
¸¸ 
await
¸¸ 
_adminServices
¸¸ ,
.
¸¸, -
ListAllRole
¸¸- 8
(
¸¸8 9
)
¸¸9 :
;
¸¸: ;
return
˝˝ 
roles
˝˝ 
;
˝˝ 
}
˛˛ 	
[
ÉÉ 	
HttpGet
ÉÉ	 
]
ÉÉ 
[
ÑÑ 	
Route
ÑÑ	 
(
ÑÑ 
$str
ÑÑ 
)
ÑÑ 
]
ÑÑ 
[
ÖÖ 	
	Authorize
ÖÖ	 
(
ÖÖ 
Roles
ÖÖ 
=
ÖÖ 
$str
ÖÖ "
)
ÖÖ" #
]
ÖÖ# $
public
ÜÜ 
async
ÜÜ 
Task
ÜÜ 
<
ÜÜ 
IEnumerable
ÜÜ %
<
ÜÜ% &

UserMaster
ÜÜ& 0
>
ÜÜ0 1
>
ÜÜ1 2
ListUser
ÜÜ3 ;
(
ÜÜ; <
)
ÜÜ< =
{
áá 	
var
àà 
users
àà 
=
àà 
await
àà 
_adminServices
àà ,
.
àà, -
ListAllUser
àà- 8
(
àà8 9
)
àà9 :
;
àà: ;
return
ââ 
users
ââ 
;
ââ 
}
ää 	
[
êê 	
HttpPost
êê	 
]
êê 
[
ëë 	
Route
ëë	 
(
ëë 
$str
ëë &
)
ëë& '
]
ëë' (
[
íí 	
	Authorize
íí	 
(
íí 
Roles
íí 
=
íí 
$str
íí "
)
íí" #
]
íí# $
public
ìì 
async
ìì 
Task
ìì 
<
ìì 
IActionResult
ìì '
>
ìì' (
DisableUser
ìì) 4
(
ìì4 5
string
ìì5 ;
userId
ìì< B
)
ììB C
{
îî 	
var
ïï 
user
ïï 
=
ïï 
await
ïï 
_adminServices
ïï +
.
ïï+ ,
FindUserByIdAsync
ïï, =
(
ïï= >
userId
ïï> D
)
ïïD E
;
ïïE F
if
óó 
(
óó 
user
óó 
.
óó 
Enabled
óó 
==
óó 
true
óó  $
)
óó$ %
{
òò 
return
ôô 

StatusCode
ôô !
(
ôô! "
StatusCodes
ôô" -
.
ôô- .*
Status500InternalServerError
ôô. J
,
ôôJ K
new
ôôL O
Response
ôôP X
{
ôôY Z
Status
ôô[ a
=
ôôb c
$str
ôôd k
,
ôôk l
Message
ôôm t
=
ôôu v
$strôôw ¢
}ôô£ §
)ôô§ •
;ôô• ¶
}
öö 
else
õõ 
{
úú 
var
ùù 
result
ùù 
=
ùù 
await
ùù "
_adminServices
ùù# 1
.
ùù1 2
DisableUser
ùù2 =
(
ùù= >
userId
ùù> D
)
ùùD E
;
ùùE F
if
ûû 
(
ûû 
!
ûû 
result
ûû 
.
ûû 
	Succeeded
ûû %
)
ûû% &
{
üü 
return
†† 

StatusCode
†† %
(
††% &
StatusCodes
††& 1
.
††1 2*
Status500InternalServerError
††2 N
,
††N O
new
††P S
Response
††T \
{
°° 
Status
°° 
=
°° 
$str
°° &
,
°°& '
Message
°°( /
=
°°0 1
$"
°°2 4
$str
°°4 G
{
°°G H
user
°°H L
.
°°L M
Email
°°M R
}
°°R S
$str
°°S a
"
°°a b
}
°°c d
)
°°d e
;
°°e f
}
¢¢ 
foreach
££ 
(
££ 
var
££ 
error
££ "
in
££# %
result
££& ,
.
££, -
Errors
££- 3
)
££3 4
{
§§ 

ModelState
•• 
.
•• 
AddModelError
•• ,
(
••, -
$str
••- /
,
••/ 0
error
••1 6
.
••6 7
Description
••7 B
)
••B C
;
••C D
}
¶¶ 
}
®® 
return
©© 
Ok
©© 
(
©© 
new
©© 
Response
©© "
{
©©# $
Status
©©% +
=
©©, -
$str
©©. 7
,
©©7 8
Message
©©9 @
=
©©A B
$str
©©C `
}
©©a b
)
©©b c
;
©©c d
}
™™ 	
[
∞∞ 	
HttpPost
∞∞	 
]
∞∞ 
[
±± 	
Route
±±	 
(
±± 
$str
±± %
)
±±% &
]
±±& '
[
≤≤ 	
	Authorize
≤≤	 
(
≤≤ 
Roles
≤≤ 
=
≤≤ 
$str
≤≤ "
)
≤≤" #
]
≤≤# $
public
≥≥ 
async
≥≥ 
Task
≥≥ 
<
≥≥ 
IActionResult
≥≥ '
>
≥≥' (

EnableUser
≥≥) 3
(
≥≥3 4
string
≥≥4 :
userId
≥≥; A
)
≥≥A B
{
¥¥ 	
var
µµ 
user
µµ 
=
µµ 
await
µµ 
_adminServices
µµ +
.
µµ+ ,
FindUserByIdAsync
µµ, =
(
µµ= >
userId
µµ> D
)
µµD E
;
µµE F
if
∑∑ 
(
∑∑ 
user
∑∑ 
.
∑∑ 
Enabled
∑∑ 
==
∑∑ 
false
∑∑  %
)
∑∑% &
{
∏∏ 
return
ππ 

StatusCode
ππ !
(
ππ! "
StatusCodes
ππ" -
.
ππ- .
Status200OK
ππ. 9
,
ππ9 :
new
ππ; >
Response
ππ? G
{
ππH I
Status
ππJ P
=
ππQ R
$str
ππS Z
,
ππZ [
Message
ππ\ c
=
ππd e
$strππf ì
}ππî ï
)ππï ñ
;ππñ ó
}
∫∫ 
else
ªª 
{
ºº 
var
ΩΩ 
result
ΩΩ 
=
ΩΩ 
await
ΩΩ "
_adminServices
ΩΩ# 1
.
ΩΩ1 2

EnableUser
ΩΩ2 <
(
ΩΩ< =
userId
ΩΩ= C
)
ΩΩC D
;
ΩΩD E
if
ææ 
(
ææ 
!
ææ 
result
ææ 
.
ææ 
	Succeeded
ææ %
)
ææ% &
{
øø 
return
¿¿ 

StatusCode
¿¿ %
(
¿¿% &
StatusCodes
¿¿& 1
.
¿¿1 2*
Status500InternalServerError
¿¿2 N
,
¿¿N O
new
¿¿P S
Response
¿¿T \
{
¡¡ 
Status
¡¡ 
=
¡¡ 
$str
¡¡ &
,
¡¡& '
Message
¡¡( /
=
¡¡0 1
$"
¡¡2 4
$str
¡¡4 G
{
¡¡G H
user
¡¡H L
.
¡¡L M
Email
¡¡M R
}
¡¡R S
$str
¡¡S a
"
¡¡a b
}
¡¡c d
)
¡¡d e
;
¡¡e f
}
¬¬ 
foreach
√√ 
(
√√ 
var
√√ 
error
√√ "
in
√√# %
result
√√& ,
.
√√, -
Errors
√√- 3
)
√√3 4
{
ƒƒ 

ModelState
≈≈ 
.
≈≈ 
AddModelError
≈≈ ,
(
≈≈, -
$str
≈≈- /
,
≈≈/ 0
error
≈≈1 6
.
≈≈6 7
Description
≈≈7 B
)
≈≈B C
;
≈≈C D
}
∆∆ 
}
»» 
return
…… 
Ok
…… 
(
…… 
new
…… 
Response
…… "
{
……# $
Status
……% +
=
……, -
$str
……. 7
,
……7 8
Message
……9 @
=
……A B
$str
……C ^
}
……_ `
)
……` a
;
……a b
}
   	
}
òò 
}ôô ∞
ZC:\Users\selvaak\source\repos\.NET-NewYaksha-UseCase\E-Loan\Controllers\ClerkController.cs
	namespace

 	
E_Loan


 
.

 
Controllers

 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
[ 
	Authorize 
( 
Roles 
= 
$str $
)$ %
]% &
public 

class 
ClerkController  
:! "
ControllerBase# 1
{ 
private 
readonly 
ILoanClerkServices +
_clerkServices, :
;: ;
public 
ClerkController 
( 
ILoanClerkServices 1
loanClerkServices2 C
)C D
{ 	
_clerkServices 
= 
loanClerkServices .
;. /
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &

LoanMaster& 0
>0 1
>1 2
GetAllApplication3 D
(D E
)E F
{ 	
return   
await   
_clerkServices   '
.  ' (
AllLoanApplication  ( :
(  : ;
)  ; <
;  < =
}!! 	
[&& 	
HttpGet&&	 
]&& 
['' 	
Route''	 
('' 
$str'' 
)'' 
]'' 
public(( 
async(( 
Task(( 
<(( 
IEnumerable(( %
<((% &

LoanMaster((& 0
>((0 1
>((1 2%
NotRecivedLoanApplication((3 L
(((L M
)((M N
{)) 	
return** 
await** 
_clerkServices** '
.**' (&
NotReceivedLoanApplication**( B
(**B C
)**C D
;**D E
}++ 	
[00 	
HttpGet00	 
]00 
[11 	
Route11	 
(11 
$str11 
)11 
]11 
public22 
async22 
Task22 
<22 
IEnumerable22 %
<22% &

LoanMaster22& 0
>220 1
>221 2"
RecivedLoanApplication223 I
(22I J
)22J K
{33 	
return44 
await44 
_clerkServices44 '
.44' (#
ReceivedLoanApplication44( ?
(44? @
)44@ A
;44A B
}55 	
[== 	
HttpPost==	 
]== 
[>> 	
Route>>	 
(>> 
$str>> &
)>>& '
]>>' (
public?? 
async?? 
Task?? 
<?? 
IActionResult?? '
>??' (
ProcessLoan??) 4
(??4 5
[??5 6
FromBody??6 >
]??> ?
LoanProcesstrans??@ P
model??Q V
,??V W
int??X [
loanId??\ b
)??b c
{@@ 	
throwBB 
newBB #
NotImplementedExceptionBB -
(BB- .
)BB. /
;BB/ 0
}CC 	
}DD 
}EE ºR
]C:\Users\selvaak\source\repos\.NET-NewYaksha-UseCase\E-Loan\Controllers\CustomerController.cs
	namespace

 	
E_Loan


 
.

 
Controllers

 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
[ 
	Authorize 
( 
Roles 
= 
$str !
)! "
]" #
public 

class 
CustomerController #
:$ %
ControllerBase& 4
{ 
private 
readonly !
ILoanCustomerServices .
_customerServices/ @
;@ A
public 
CustomerController !
(! "!
ILoanCustomerServices" 7 
loanCustomerServices8 L
)L M
{ 	
_customerServices 
=  
loanCustomerServices  4
;4 5
} 	
[   	
HttpGet  	 
]   
[!! 	
Route!!	 
(!! 
$str!! %
)!!% &
]!!& '
public"" 
async"" 
Task"" 
<"" 
ActionResult"" &
<""& '

LoanMaster""' 1
>""1 2
>""2 3
AppliedLoanStatus""4 E
(""E F
int""F I
loanId""J P
)""P Q
{## 	
if$$ 
($$ 
!$$ 

ModelState$$ 
.$$ 
IsValid$$ #
)$$# $
{%% 
return&& 

BadRequest&& !
(&&! "

ModelState&&" ,
)&&, -
;&&- .
}'' 
var)) 
emailId)) 
=)) 
HttpContext)) %
.))% &
User))& *
.))* +
FindFirstValue))+ 9
())9 :

ClaimTypes)): D
.))D E
NameIdentifier))E S
)))S T
;))T U
var++ 

loanStatus++ 
=++ 
await++ "
_customerServices++# 4
.++4 5
AppliedLoanStatus++5 F
(++F G
loanId++G M
)++M N
;++N O
if,, 
(,, 

loanStatus,, 
==,, 
null,, "
),," #
{-- 
return.. 
NotFound.. 
(..  
)..  !
;..! "
}// 
if00 
(00 

loanStatus00 
.00 
Email00  
!=00! #
emailId00$ +
)00+ ,
{11 
return22 

StatusCode22 !
(22! "
StatusCodes22" -
.22- .(
Status500InternalServerError22. J
,22J K
new22L O
Response22P X
{33 
Status33 
=33 
$str33 "
,33" #
Message33$ +
=33, -
$"33. 0
$str330 M
"33M N
}33O P
)33P Q
;33Q R
}44 
return55 

loanStatus55 
;55 
}66 	
[<< 	
HttpPost<<	 
]<< 
[== 	
Route==	 
(== 
$str== 
)== 
]==  
public>> 
async>> 
Task>> 
<>> 
IActionResult>> '
>>>' (
ApplayMortage>>) 6
(>>6 7
[>>7 8
FromBody>>8 @
]>>@ A

LoanMaster>>B L
model>>M R
)>>R S
{?? 	
if@@ 
(@@ 
!@@ 

ModelState@@ 
.@@ 
IsValid@@ #
)@@# $
{AA 
returnBB 

BadRequestBB !
(BB! "

ModelStateBB" ,
)BB, -
;BB- .
}CC 
varEE 
emailIdEE 
=EE 
HttpContextEE %
.EE% &
UserEE& *
.EE* +
FindFirstValueEE+ 9
(EE9 :

ClaimTypesEE: D
.EED E
NameIdentifierEEE S
)EES T
;EET U

LoanMasterFF 
newLoanFF 
=FF  
newFF! $

LoanMasterFF% /
{GG 
LoanNameHH 
=HH 
modelHH  
.HH  !
LoanNameHH! )
,HH) *

LoanAmountII 
=II 
modelII "
.II" #

LoanAmountII# -
,II- .
BusinessStructureJJ !
=JJ" #
modelJJ$ )
.JJ) *
BusinessStructureJJ* ;
,JJ; <
Billing_IndicatorKK !
=KK" #
modelKK$ )
.KK) *
Billing_IndicatorKK* ;
,KK; <
Tax_IndicatorLL 
=LL 
modelLL  %
.LL% &
Tax_IndicatorLL& 3
,LL3 4
ContactAddressMM 
=MM  
modelMM! &
.MM& '
ContactAddressMM' 5
,MM5 6
PhoneNN 
=NN 
modelNN 
.NN 
PhoneNN #
,NN# $
EmailOO 
=OO 
emailIdOO 
,OO  
	AppliedByPP 
=PP 
modelPP !
.PP! "
	AppliedByPP" +
,PP+ ,
	CreatedOnQQ 
=QQ 
DateTimeQQ $
.QQ$ %
NowQQ% (
,QQ( )
StatusRR 
=RR 
modelRR 
.RR 
StatusRR %
}SS 
;SS 
varTT 
resultTT 
=TT 
awaitTT 
_customerServicesTT 0
.TT0 1
ApplyMortgageTT1 >
(TT> ?
newLoanTT? F
)TTF G
;TTG H
returnUU 
OkUU 
(UU 
$strUU 9
+UU: ;
resultUU< B
.UUB C
LoanIdUUC I
)UUI J
;UUJ K
}VV 	
[__ 	
HttpPost__	 
]__ 
[`` 	
Route``	 
(`` 
$str`` (
)``( )
]``) *
publicaa 
asyncaa 
Taskaa 
<aa 
IActionResultaa '
>aa' (
UpdateMortageaa) 6
(aa6 7
[aa7 8
FromBodyaa8 @
]aa@ A

LoanMasteraaB L
modelaaM R
,aaR S
intaaT W
loanIdaaX ^
)aa^ _
{bb 	
ifcc 
(cc 
!cc 

ModelStatecc 
.cc 
IsValidcc #
&&cc$ &
loanIdcc' -
<=cc. 0
$numcc1 2
)cc2 3
{dd 
returnee 

BadRequestee !
(ee! "

ModelStateee" ,
)ee, -
;ee- .
}ff 

LoanMastergg 

loanUpdategg !
=gg" #
awaitgg$ )
_customerServicesgg* ;
.gg; <
AppliedLoanStatusgg< M
(ggM N
loanIdggN T
)ggT U
;ggU V
varhh 
emailIdhh 
=hh 
HttpContexthh %
.hh% &
Userhh& *
.hh* +
FindFirstValuehh+ 9
(hh9 :

ClaimTypeshh: D
.hhD E
NameIdentifierhhE S
)hhS T
;hhT U
ifjj 
(jj 

loanUpdatejj 
.jj 
Statusjj !
==jj" $

LoanStatusjj% /
.jj/ 0
Receivedjj0 8
)jj8 9
{kk 
returnll 

StatusCodell !
(ll! "
StatusCodesll" -
.ll- .(
Status500InternalServerErrorll. J
,llJ K
newllL O
ResponsellP X
{mm 
Statusmm 
=mm 
$strmm "
,mm" #
Messagemm$ +
=mm, -
$"mm. 0
$strmm0 J
{mmJ K

loanUpdatemmK U
.mmU V
StatusmmV \
}mm\ ]
$strmm] o
"mmo p
}mmq r
)mmr s
;mms t
}nn 
ifqq 
(qq 

loanUpdateqq 
!=qq 
nullqq !
&&qq" $

loanUpdateqq% /
.qq/ 0
Statusqq0 6
==qq7 9

LoanStatusqq: D
.qqD E
NotReceivedqqE P
)qqP Q
{rr 

loanUpdatess 
.ss 
LoanNamess #
=ss$ %
modelss& +
.ss+ ,
LoanNamess, 4
;ss4 5

loanUpdatett 
.tt 

LoanAmounttt %
=tt& '
modeltt( -
.tt- .

LoanAmounttt. 8
;tt8 9

loanUpdateuu 
.uu 
BusinessStructureuu ,
=uu- .
modeluu/ 4
.uu4 5
BusinessStructureuu5 F
;uuF G

loanUpdatevv 
.vv 
Billing_Indicatorvv ,
=vv- .
modelvv/ 4
.vv4 5
Billing_Indicatorvv5 F
;vvF G

loanUpdateww 
.ww 
Tax_Indicatorww (
=ww) *
modelww+ 0
.ww0 1
Tax_Indicatorww1 >
;ww> ?

loanUpdatexx 
.xx 
ContactAddressxx )
=xx* +
modelxx, 1
.xx1 2
ContactAddressxx2 @
;xx@ A

loanUpdateyy 
.yy 
Phoneyy  
=yy! "
modelyy# (
.yy( )
Phoneyy) .
;yy. /

loanUpdatezz 
.zz 
Emailzz  
=zz! "
emailIdzz# *
;zz* +

loanUpdate{{ 
.{{ 
	AppliedBy{{ $
={{% &
model{{' ,
.{{, -
	AppliedBy{{- 6
;{{6 7

loanUpdate|| 
.|| 
	CreatedOn|| $
=||% &
DateTime||' /
.||/ 0
Now||0 3
;||3 4

loanUpdate}} 
.}} 
Status}} !
=}}" #
model}}$ )
.}}) *
Status}}* 0
;}}0 1
await 
_customerServices '
.' (
UpdateMortgage( 6
(6 7

loanUpdate7 A
)A B
;B C
return
ÄÄ 
Ok
ÄÄ 
(
ÄÄ 

loanUpdate
ÄÄ $
)
ÄÄ$ %
;
ÄÄ% &
}
ÅÅ 
return
ÇÇ 

StatusCode
ÇÇ 
(
ÇÇ 
StatusCodes
ÇÇ )
.
ÇÇ) **
Status500InternalServerError
ÇÇ* F
,
ÇÇF G
new
ÇÇH K
Response
ÇÇL T
{
ÉÉ 
Status
ÉÉ 
=
ÉÉ 
$str
ÉÉ 
,
ÉÉ 
Message
ÉÉ  '
=
ÉÉ( )
$"
ÉÉ* ,
$str
ÉÉ, ;
{
ÉÉ; <
loanId
ÉÉ< B
}
ÉÉB C
$str
ÉÉC U
"
ÉÉU V
}
ÉÉW X
)
ÉÉX Y
;
ÉÉY Z
}
ÑÑ 	
}
ÖÖ 
}ÜÜ å*
\C:\Users\selvaak\source\repos\.NET-NewYaksha-UseCase\E-Loan\Controllers\ManagerController.cs
	namespace

 	
E_Loan


 
.

 
Controllers

 
{ 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
[ 
	Authorize 
( 
Roles 
= 
$str &
)& '
]' (
public 

class 
ManagerController "
:# $
ControllerBase% 3
{ 
private 
readonly  
ILoanManagerServices -
_managerServices. >
;> ?
public 
ManagerController  
(  ! 
ILoanManagerServices! 5
loanManagerServices6 I
)I J
{ 	
_managerServices 
= 
loanManagerServices 2
;2 3
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
IEnumerable %
<% &

LoanMaster& 0
>0 1
>1 2
GetAllApplication3 D
(D E
)E F
{ 	
return   
await   
_managerServices   )
.  ) *
AllLoanApplication  * <
(  < =
)  = >
;  > ?
}!! 	
[(( 	
HttpPost((	 
](( 
[)) 	
Route))	 
()) 
$str)) )
)))) *
]))* +
public** 
async** 
Task** 
<** 

LoanMaster** $
>**$ %!
AcceptLoanApplication**& ;
(**; <
int**< ?
loanId**@ F
,**F G
string**H N
remark**O U
)**U V
{++ 	
return,, 
await,, 
_managerServices,, )
.,,) *!
AcceptLoanApplication,,* ?
(,,? @
loanId,,@ F
,,,F G
remark,,H N
),,N O
;,,O P
}-- 	
[44 	
HttpPost44	 
]44 
[55 	
Route55	 
(55 
$str55 )
)55) *
]55* +
public66 
async66 
Task66 
<66 

LoanMaster66 $
>66$ %!
RejectLoanApplication66& ;
(66; <
int66< ?
loanId66@ F
,66F G
string66H N
remark66O U
)66U V
{77 	
return88 
await88 
_managerServices88 )
.88) *!
RejectLoanApplication88* ?
(88? @
loanId88@ F
,88F G
remark88H N
)88N O
;88O P
}99 	
[@@ 	
HttpPost@@	 
]@@ 
[AA 	
RouteAA	 
(AA 
$strAA )
)AA) *
]AA* +
publicBB 
asyncBB 
TaskBB 
<BB 
IActionResultBB '
>BB' (
SanctionedLoanBB) 7
(BB7 8
[BB8 9
FromBodyBB9 A
]BBA B!
LoanApprovalViewModelBBC X
modelBBY ^
,BB^ _
intBB` c
loanIdBBd j
)BBj k
{CC 	
ifDD 
(DD 
!DD 

ModelStateDD 
.DD 
IsValidDD #
)DD# $
{EE 
returnFF 

BadRequestFF !
(FF! "

ModelStateFF" ,
)FF, -
;FF- .
}GG 
varJJ 

loanStatusJJ 
=JJ 
awaitJJ "
_managerServicesJJ# 3
.JJ3 4
CheckLoanStatusJJ4 C
(JJC D
loanIdJJD J
)JJJ K
;JJK L
ifKK 
(KK 

loanStatusKK 
.KK 
StatusKK  
==KK! #

LoanStatusKK$ .
.KK. /
AcceptKK/ 5
)KK5 6
{LL 
LoanApprovaltransMM !
newApprovedMM" -
=MM. /
newMM0 3
LoanApprovaltransMM4 E
{NN 
SanctionedAmountOO $
=OO% &
modelOO' ,
.OO, -
SanctionedAmountOO- =
,OO= >

TermofloanPP 
=PP  
modelPP! &
.PP& '

TermofloanPP' 1
,PP1 2
PaymentStartDateQQ $
=QQ% &
modelQQ' ,
.QQ, -
PaymentStartDateQQ- =
}RR 
;RR 
varSS 
resultSS 
=SS 
awaitSS "
_managerServicesSS# 3
.SS3 4
SanctionedLoanSS4 B
(SSB C
newApprovedSSC N
)SSN O
;SSO P
returnTT 
OkTT 
(TT 
$strTT L
+TTM N
resultTTO U
.TTU V
IdTTV X
)TTX Y
;TTY Z
}UU 
returnVV 

StatusCodeVV 
(VV 
StatusCodesVV )
.VV) *(
Status500InternalServerErrorVV* F
,VVF G
newVVH K
ResponseVVL T
{WW 
StatusWW 
=WW 
$strWW 
,WW 
MessageWW  '
=WW( )
$"WW* ,
$strWW, ;
{WW; <
loanIdWW< B
}WWB C
$strWWC W
"WWW X
}WWY Z
)WWZ [
;WW[ \
}XX 	
}YY 
}ZZ ¯
dC:\Users\selvaak\source\repos\.NET-NewYaksha-UseCase\E-Loan\Controllers\WeatherForecastController.cs
	namespace		 	
E_Loan		
 
.		 
Controllers		 
{

 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class %
WeatherForecastController *
:+ ,
ControllerBase- ;
{ 
private 
static 
readonly 
string  &
[& '
]' (
	Summaries) 2
=3 4
new5 8
[8 9
]9 :
{ 	
$str 
, 
$str !
,! "
$str# +
,+ ,
$str- 3
,3 4
$str5 ;
,; <
$str= C
,C D
$strE L
,L M
$strN S
,S T
$strU a
,a b
$strc n
} 	
;	 

private 
readonly 
ILogger  
<  !%
WeatherForecastController! :
>: ;
_logger< C
;C D
public %
WeatherForecastController (
(( )
ILogger) 0
<0 1%
WeatherForecastController1 J
>J K
loggerL R
)R S
{ 	
_logger 
= 
logger 
; 
} 	
[ 	
HttpGet	 
] 
public 
IEnumerable 
< 
WeatherForecast *
>* +
Get, /
(/ 0
)0 1
{ 	
var 
rng 
= 
new 
Random  
(  !
)! "
;" #
return   

Enumerable   
.   
Range   #
(  # $
$num  $ %
,  % &
$num  ' (
)  ( )
.  ) *
Select  * 0
(  0 1
index  1 6
=>  7 9
new  : =
WeatherForecast  > M
{!! 
Date"" 
="" 
DateTime"" 
.""  
Now""  #
.""# $
AddDays""$ +
(""+ ,
index"", 1
)""1 2
,""2 3
TemperatureC## 
=## 
rng## "
.##" #
Next### '
(##' (
-##( )
$num##) +
,##+ ,
$num##- /
)##/ 0
,##0 1
Summary$$ 
=$$ 
	Summaries$$ #
[$$# $
rng$$$ '
.$$' (
Next$$( ,
($$, -
	Summaries$$- 6
.$$6 7
Length$$7 =
)$$= >
]$$> ?
}%% 
)%% 
.&& 
ToArray&& 
(&& 
)&& 
;&& 
}'' 	
}(( 
})) ö

FC:\Users\selvaak\source\repos\.NET-NewYaksha-UseCase\E-Loan\Program.cs
	namespace 	
E_Loan
 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{		 	
CreateHostBuilder

 
(

 
args

 "
)

" #
.

# $
Build

$ )
(

) *
)

* +
.

+ ,
Run

, /
(

/ 0
)

0 1
;

1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} ô;
FC:\Users\selvaak\source\repos\.NET-NewYaksha-UseCase\E-Loan\Startup.cs
	namespace 	
E_Loan
 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services   
.   
AddControllers   #
(  # $
)  $ %
.  % &
AddJsonOptions  & 4
(  4 5
options  5 <
=>  = ?
{  @ A
options!! 
.!! !
JsonSerializerOptions!! -
.!!- . 
PropertyNamingPolicy!!. B
=!!C D
null!!E I
;!!I J
options"" 
."" !
JsonSerializerOptions"" -
.""- .
DictionaryKeyPolicy"". A
=""B C
null""D H
;""H I
}$$ 
)$$ 
;$$ 
services%% 
.%% #
AddControllersWithViews%% ,
(%%, -
)%%- .
;%%. /
services'' 
.'' 
AddDbContext'' !
<''! "
UserMasterDbContext''" 5
>''5 6
(''6 7
options''7 >
=>''? A
options(( 
.(( 
UseSqlServer((  
(((  !
Configuration((! .
.((. /
GetConnectionString((/ B
(((B C
$str((C L
)((L M
)((M N
)((N O
;((O P
services++ 
.++ 
AddIdentity++  
<++  !

UserMaster++! +
,+++ ,
IdentityRole++- 9
>++9 :
(++: ;
)++; <
.,, $
AddEntityFrameworkStores,, )
<,,) *
UserMasterDbContext,,* =
>,,= >
(,,> ?
),,? @
.-- $
AddDefaultTokenProviders-- )
(--) *
)--* +
;--+ ,
services00 
.00 
AddAuthentication00 &
(00& '
options00' .
=>00/ 1
{11 
options22 
.22 %
DefaultAuthenticateScheme22 1
=222 3
JwtBearerDefaults224 E
.22E F 
AuthenticationScheme22F Z
;22Z [
options33 
.33 "
DefaultChallengeScheme33 .
=33/ 0
JwtBearerDefaults331 B
.33B C 
AuthenticationScheme33C W
;33W X
options44 
.44 
DefaultScheme44 %
=44& '
JwtBearerDefaults44( 9
.449 : 
AuthenticationScheme44: N
;44N O
}55 
)55 
.88 
AddJwtBearer88 
(88 
options88 !
=>88" $
{99 
options:: 
.:: 
	SaveToken:: !
=::" #
true::$ (
;::( )
options;; 
.;;  
RequireHttpsMetadata;; ,
=;;- .
false;;/ 4
;;;4 5
options<< 
.<< %
TokenValidationParameters<< 1
=<<2 3
new<<4 7%
TokenValidationParameters<<8 Q
(<<Q R
)<<R S
{== 
ValidateIssuer>> "
=>># $
true>>% )
,>>) *
ValidateAudience?? $
=??% &
true??' +
,??+ ,
ValidAudience@@ !
=@@" #
Configuration@@$ 1
[@@1 2
$str@@2 E
]@@E F
,@@F G
ValidIssuerAA 
=AA  !
ConfigurationAA" /
[AA/ 0
$strAA0 A
]AAA B
,AAB C
IssuerSigningKeyBB $
=BB% &
newBB' * 
SymmetricSecurityKeyBB+ ?
(BB? @
EncodingBB@ H
.BBH I
UTF8BBI M
.BBM N
GetBytesBBN V
(BBV W
ConfigurationBBW d
[BBd e
$strBBe q
]BBq r
)BBr s
)BBs t
}CC 
;CC 
}DD 
)DD 
;DD 
servicesEE 
.EE 
AddSingletonEE !
<EE! " 
IHttpContextAccessorEE" 6
,EE6 7
HttpContextAccessorEE8 K
>EEK L
(EEL M
)EEM N
;EEN O
servicesFF 
.FF 
	AddScopedFF 
<FF  
ILoanAdminRepositoryFF 3
,FF3 4
LoanAdminRepositoryFF5 H
>FFH I
(FFI J
)FFJ K
;FFK L
servicesGG 
.GG 
	AddScopedGG 
<GG 
ILoanAdminServicesGG 1
,GG1 2
LoanAdminServicesGG3 D
>GGD E
(GGE F
)GGF G
;GGG H
servicesHH 
.HH 
	AddScopedHH 
<HH #
ILoanCustomerRepositoryHH 6
,HH6 7"
LoanCustomerRepositoryHH8 N
>HHN O
(HHO P
)HHP Q
;HHQ R
servicesII 
.II 
	AddScopedII 
<II !
ILoanCustomerServicesII 4
,II4 5 
LoanCustomerServicesII6 J
>IIJ K
(IIK L
)IIL M
;IIM N
servicesJJ 
.JJ 
	AddScopedJJ 
<JJ  
ILoanClerkRepositoryJJ 3
,JJ3 4
LoanClerkRepositoryJJ5 H
>JJH I
(JJI J
)JJJ K
;JJK L
servicesKK 
.KK 
	AddScopedKK 
<KK 
ILoanClerkServicesKK 1
,KK1 2
LoanClerkServicesKK3 D
>KKD E
(KKE F
)KKF G
;KKG H
servicesLL 
.LL 
	AddScopedLL 
<LL "
ILoanManagerRepositoryLL 5
,LL5 6!
LoanManagerRepositoryLL7 L
>LLL M
(LLM N
)LLN O
;LLO P
servicesMM 
.MM 
	AddScopedMM 
<MM  
ILoanManagerServicesMM 3
,MM3 4
LoanManagerServicesMM5 H
>MMH I
(MMI J
)MMJ K
;MMK L
}WW 	
publicZZ 
voidZZ 
	ConfigureZZ 
(ZZ 
IApplicationBuilderZZ 1
appZZ2 5
,ZZ5 6
IWebHostEnvironmentZZ7 J
envZZK N
)ZZN O
{[[ 	
if\\ 
(\\ 
env\\ 
.\\ 
IsDevelopment\\ !
(\\! "
)\\" #
)\\# $
{]] 
app^^ 
.^^ %
UseDeveloperExceptionPage^^ -
(^^- .
)^^. /
;^^/ 0
}__ 
appaa 
.aa 
UseHttpsRedirectionaa #
(aa# $
)aa$ %
;aa% &
appcc 
.cc 

UseRoutingcc 
(cc 
)cc 
;cc 
appdd 
.dd 
UseAuthenticationdd !
(dd! "
)dd" #
;dd# $
appee 
.ee 
UseAuthorizationee  
(ee  !
)ee! "
;ee" #
appff 
.ff 
UseEndpointsff 
(ff 
	endpointsff &
=>ff' )
{gg 
	endpointshh 
.hh 
MapControllershh (
(hh( )
)hh) *
;hh* +
}ii 
)ii 
;ii 
}jj 	
}kk 
}ll Œ
NC:\Users\selvaak\source\repos\.NET-NewYaksha-UseCase\E-Loan\WeatherForecast.cs
	namespace 	
E_Loan
 
{ 
public 

class 
WeatherForecast  
{ 
public 
DateTime 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
int		 
TemperatureC		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
public 
int 
TemperatureF 
=>  "
$num# %
+& '
(( )
int) ,
), -
(- .
TemperatureC. :
/; <
$num= C
)C D
;D E
public 
string 
Summary 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} 